<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>WP Plugin: Code Viewer</title>

	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
	<link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />

	<link rel="alternate" type="application/atom+xml" href="/feed/" title="ElasticDog.com Articles Feed" />

	<!-- Google Analytics -->
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-19272271-1']);
		_gaq.push(['_trackPageview']);

		(function() {
		 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		 })();
	 </script>
</head>

<body id="elasticdog-com">
<div id="header">
	<h1>
		<a href="/">ElasticDog.com</a><br />
		&hellip;the ballyhoo of <a href="/about/">Aaron Bull Schaefer</a>
	</h1>

	<h2>Survey my <a href="/projects/">Influence</a> or Peruse my <a href="/archives/">Relics</a></h2>

	<hr />
</div>

<div id="content">
	
<ul class="relativity">

	<li><a href="/2004/09/backend/" title="Workin&#8217; My Backend" class="prev" rel="prev">&larr; previous article</a></li>


	<li><a href="/2004/10/faking-multiple-templates/" title="Faking Multiple Templates in WordPress" class="next" rel="next">next article &rarr;</a></li>

</ul>



<h1 class="retired">This article has been <a href="/about/#elasticdog"><strong>retired</strong></a> and will no longer be updated. Caveat emptor!</h1>


<div class="published">&#8212; Originally Published on September 26, 2004 &#8212;</div>

<h1>WP Plugin: Code Viewer</h1>

<p>Code Viewer is a <a href="http://wordpress.org/">WordPress</a> plugin that pulls source code from an external file and displays it, optionally adding a link to download the code directly. The plugin displays the code with proper indentation, line numbers, and automatic long-line wrapping.</p>
<p>When using Code Viewer, you no longer have to worry about typing countless entity references in order to make your code &#8220;<acronym title="Hypertext Markup Language"><span class="caps">HTML</span></acronym> friendly&#8221; or to simulate tabs&#8230;it&#8217;s all done automatically with <acronym title="PHP: Hypertext Preprocessor"><span class="caps">PHP</span></acronym> and a little <acronym title="Cascading Style Sheets"><span class="caps">CSS</span></acronym>. By inserting line numbers on your page, the plugin also eliminates the problem of long, non-breaking lines screwing up your layout. In addition, line numbers make convenient reference points when discussing code samples.</p>
<p>Last, but not least&#8230;because you&#8217;re pulling the source code from an external file (rather than having it embedded directly in your entry), the same code can be repeated on numerous pages, and you only have to type it in once. This not only saves you time, but when you update the code in the centralized file, all instances of that code will be updated along with it.</p>
<h2 id="installation">Installation</h2>
<p><ins datetime="2008-02-24T02:57:54+00:00">I am no longer maintaining Code Viewer, please see <a href="/2008/02/current-status-of-the-code-viewer-wordpress-plugin/">Current Status of the Code Viewer Wordpress Plugin</a> for more details on where to get the latest version.</ins></p>
<ol>
	<li>Download <a href="/code/plugins/code-viewer.txt">Code Viewer v1.1</a></li>
	<li>Open the downloaded file in a text editor and configure the <var>$default_path</var> variable (found on line 12), setting it equal to the absolute path of your code folder</li>
	<li>Save the edited file</li>
	<li>Change the extension of the saved file from <kbd>.txt</kbd> to <kbd>.php</kbd></li>
	<li>Upload the changed file into your <kbd>wp-content/plugins/</kbd> directory.</li>
	<li>Activate the plugin on your <acronym title="WordPress"><span class="caps">WP</span></acronym> Admin &raquo; Plugin Management page by clicking the corresponding &ldquo;Activate&rdquo; link under the <b>Action</b> column.</li>
</ol>
<p>You&#8217;ll also want to add some new classes to your <span class="caps">CSS</span> that will control the look of the code listing. Everything (with the exception of auto-indention) works just fine without the <span class="caps">CSS</span>; but adding it in makes a huge difference on readability. Feel free to change these values to whatever you like, but this is how I have mine set up:</p>
<div class="highlight"><pre><code class="css"><span class="c">/* ---( CODE VIEWER FORMATTING )------------------------- */</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="p">{</span>
    <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#DDD</span><span class="p">;</span>
    <span class="k">color</span><span class="o">:</span> <span class="m">#C63</span><span class="p">;</span>
    <span class="k">font-family</span><span class="o">:</span> <span class="s2">&quot;Courier New&quot;</span><span class="o">,</span> <span class="n">Courier</span><span class="o">,</span> <span class="k">monospace</span><span class="p">;</span>
    <span class="k">line-height</span><span class="o">:</span> <span class="m">130</span><span class="o">%</span><span class="p">;</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">12px</span> <span class="m">12px</span> <span class="m">12px</span> <span class="m">45px</span><span class="p">;</span>
    <span class="k">margin</span><span class="o">:</span> <span class="m">1.5em</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">1px</span> <span class="m">2px</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab0</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">2px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab1</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">26px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab2</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">50px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab3</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">74px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab4</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">98px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab5</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">122px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab6</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">146px</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.tab7</span> <span class="p">{</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">170px</span><span class="p">;</span> <span class="p">}</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.odd</span> <span class="p">{</span> <span class="k">background-color</span><span class="o">:</span> <span class="m">#FFF</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.even</span> <span class="p">{</span> <span class="k">background-color</span><span class="o">:</span> <span class="m">#F0F0F0</span><span class="p">;</span> <span class="p">}</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span><span class="nc">.sourcelink</span> <span class="p">{</span>
    <span class="k">color</span><span class="o">:</span> <span class="m">#000</span><span class="p">;</span>
    <span class="k">font</span><span class="o">:</span> <span class="m">115</span><span class="o">%</span> <span class="n">Georgia</span><span class="o">,</span> <span class="s2">&quot;Times New Roman&quot;</span><span class="o">,</span> <span class="n">Times</span><span class="o">,</span> <span class="k">serif</span><span class="p">;</span>
    <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
    <span class="k">margin-left</span><span class="o">:</span> <span class="m">-32px</span><span class="p">;</span>
    <span class="k">padding-top</span><span class="o">:</span> <span class="m">.85em</span><span class="p">;</span>
    <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
    <span class="p">}</span>

<span class="nt">ol</span><span class="nc">.codelist</span> <span class="nt">li</span> <span class="nt">code</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#222</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div><div class="sourcelink">Download Source Code: <a href="/code/2004/09/code-viewer.css">code-viewer.css</a></div>
<h2 id="usage">Usage</h2>
<p>Code Viewer basically searches your entry for a custom <acronym title="Extensible Markup Language"><span class="caps">XML</span></acronym> tag named <code>&lt;viewcode /&gt;</code>, that tells the server to look at an external file and parse it line-by-line into an ordered list. It can be placed anywhere a block-level tag is valid, and like any empty element in <acronym title="Extensible Hypertext Markup Language"><span class="caps">XHTML</span></acronym>, <strong>the tag must be properly closed</strong>.</p>
<p>To better illustrate its usage, the tag used in this entry (to show the <kbd>code-viewer.css</kbd> listing above) was:<br />
<code>&lt;viewcode src="2004/09/code-viewer.css" link="yes" /&gt;</code></p>
<h2 id="parameters">Parameters</h2>
<div class="highlight"><pre><code class="xml"><span class="nt">&lt;viewcode</span> <span class="na">src=</span><span class="s">&quot;URL&quot;</span> <span class="na">link=</span><span class="s">&quot;display&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div><ul>
	<li>The <code>src</code> attribute is <strong>required</strong>.
	<ul>
		<li>&#34;<span class="caps">URL</span>&#34; &#8211; <i>string</i> &#8211; The <acronym title="Uniform Resource Locator"><span class="caps">URL</span></acronym> of the code to display. Note that relative paths are in relation to the <var>$default_path</var> variable set during <a href="#installation">the installation step</a>.</li>
	</ul></li>
	<li>The <code>link</code> attribute is <strong>optional</strong>.
	<ul>
		<li>&#34;display&#34; &#8211; <i>string</i> &#8211; Should the link to the code be displayed (<code>"yes"</code>), or not be displayed (<code>"no"</code>). If the <code>link</code> attribute is left out of the tag completely, the value defaults to <code>"no"</code>.</li>
	</ul></li>
</ul>
<p>Here are some examples of <em>valid syntax</em> recognized by Code Viewer&#8230;note that all of these examples point to the same file (assuming the <var>$default_path</var> variable is set to &#34;<code>http://elasticdog.com/code/</code>&#34;):</p>
<div class="highlight"><pre><code class="xml"><span class="nt">&lt;viewcode</span> <span class="na">src=</span><span class="s">&quot;http://elasticdog.com/code/example.txt&quot;</span> <span class="na">link=</span><span class="s">&quot;no&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;viewcode</span> <span class="na">src=</span><span class="s">&quot;http://elasticdog.com/code/example.txt&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;viewcode</span> <span class="na">src=</span><span class="s">&quot;/code/example.txt&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;viewcode</span> <span class="na">src=</span><span class="s">&quot;example.txt&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div><p>Each attribute value <strong>must</strong> be surrounded with double quotes (&#34;), and <em>not</em> single quotes (&#39;), or the tag will not be recognized.</p>
<h2 id="version-history">Version History</h2>
<ul>
	<li><em>v1.1 (10 Oct 2004)</em> &#8211; Fixed blank line detection; no longer confused by whitespace characters.</li>
	<li><em>v1.01 (30 Sep 2004)</em> &#8211; Update to <kbd>code-viewer.css</kbd>; fixed inconsistent font sizing.</li>
	<li><em>v1.0 (26 Sep 2004)</em> &#8211; Initial release to the public.</li>
</ul>
<h2 id="credits">Credits</h2>
<p>The idea to use ordered lists in <span class="caps">XHTML</span> to present code, originated from Simon Willison&#8217;s <a href="http://simon.incutio.com/archive/2002/07/10/numberedCodeListing"><span class="caps">CSS</span> Numbered Code Listings</a> blog entry. The same idea has been used by other designers, and in particular, a fellow WP plugin author named David House&#8230;</p>
<p>Looking at <a href="http://xmouse.ithium.net/archives/2004/07/19/implementing-a-code-snippet-system">David&#8217;s code-snippet system</a>, I fell in love with the idea, but thought his implementation could be improved upon. Code Viewer should be much more efficient in comparison and has the added functionality of optional link inclusion, styling differences for every other line, and better <span class="caps">URL</span> &amp; file type support. A big thanks goes out to both David and Simon for their contributions to my latest creation.</p>

<h1 class="retired">This article has been <a href="/about/#elasticdog"><strong>retired</strong></a> and will no longer be updated. Caveat emptor!</h1>



<ul class="relativity">

	<li><a href="/2004/09/backend/" title="Workin&#8217; My Backend" class="prev" rel="prev">&larr; previous article</a></li>


	<li><a href="/2004/10/faking-multiple-templates/" title="Faking Multiple Templates in WordPress" class="next" rel="next">next article &rarr;</a></li>

</ul>



</div>
<div id="footer">
	<hr />

	<ul>
	
		<li><a href="/">Home</a></li>
	
	
		<li><a href="/about/">About</a></li>
	
	
		<li><a href="/projects/">Projects</a></li>
	
	
		<li><a href="/archives/">Archives</a></li>
	
	</ul>

	<div id="syndication"><a href="http://feeds.elasticdog.com/elasticdog" title="Subscribe to ElasticDog.com's Syndication Feed"><img src="/images/feed-icon.png" alt="Syndication Feed Icon" /></a></div>

	<p>Copyright &copy; 2003&#8211;2013 Aaron Bull Schaefer &#8212; All Rights Reserved.</p>
</div>

</body>
</html>
