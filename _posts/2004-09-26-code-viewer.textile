---
layout:    post
published: false
title:     WP Plugin: Code Viewer
---
Code Viewer is a <a href="http://wordpress.org/">WordPress</a> plugin that pulls source code from an external file and displays it, optionally adding a link to download the code directly.  The plugin displays the code with proper indentation, line numbers, and automatic long-line wrapping.

When using Code Viewer, you no longer have to worry about typing countless entity references in order to make your code "<abbr title="Hypertext Markup Language">HTML</abbr> friendly" or to simulate tabs...it's all done automatically with <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> and a little <abbr title="Cascading Style Sheets">CSS</abbr>.  By inserting line numbers on your page, the plugin also eliminates the problem of long, non-breaking lines screwing up your layout.  In addition, line numbers make convenient reference points when discussing code samples.

Last, but not least...because you're pulling the source code from an external file (rather than having it embedded directly in your entry), the same code can be repeated on numerous pages, and you only have to type it in once.  This not only saves you time, but when you update the code in the centralized file, all instances of that code will be updated along with it.

<h3 id="installation">Installation</h3>

<ins datetime="2008-02-24T02:57:54+00:00">I am no longer maintaining Code Viewer, please see <a href="http://elasticdog.com/2008/02/current-status-of-the-code-viewer-wordpress-plugin/">Current Status of the Code Viewer Wordpress Plugin</a> for more details on where to get the latest version.</ins>

<ol>
	<li>Download <a href="http://elasticdog.com/code/plugins/code-viewer.txt">Code Viewer v1.1</a></li>
	<li>Open the downloaded file in a text editor and configure the <var>$default_path</var> variable (found on line 12), setting it equal to the absolute path of your code folder</li>
	<li>Save the edited file</li>
	<li>Change the extension of the saved file from <kbd>.txt</kbd> to <kbd>.php</kbd></li>
	<li>Upload the changed file into your <kbd>wp-content/plugins/</kbd> directory.</li>
	<li>Activate the plugin on your <abbr title="WordPress">WP</abbr> Admin &raquo; Plugin Management page by clicking the corresponding &ldquo;Activate&rdquo; link under the <b>Action</b> column.</li>
</ol>

You'll also want to add some new classes to your <abbr title="Cascading Style Sheets">CSS</abbr> that will control the look of the code listing.  Everything (with the exception of auto-indention) works just fine without the <abbr title="Cascading Style Sheets">CSS</abbr>; but adding it in makes a huge difference on readability.  Feel free to change these values to whatever you like, but this is how I have mine set up:

<pre><code>
/* ---( CODE VIEWER FORMATTING )------------------------- */

ol.codelist {
    border: 1px solid #DDD;
    color: #C63;
    font-family: "Courier New", Courier, monospace;
    line-height: 130%;
    padding: 12px 12px 12px 45px;
    margin: 1.5em 0;
    }

ol.codelist li {
    margin: 0;
    padding: 1px 2px;
    }

ol.codelist li.tab0 { padding-left: 2px; }
ol.codelist li.tab1 { padding-left: 26px; }
ol.codelist li.tab2 { padding-left: 50px; }
ol.codelist li.tab3 { padding-left: 74px; }
ol.codelist li.tab4 { padding-left: 98px; }
ol.codelist li.tab5 { padding-left: 122px; }
ol.codelist li.tab6 { padding-left: 146px; }
ol.codelist li.tab7 { padding-left: 170px; }

ol.codelist li.odd { background-color: #FFF; }
ol.codelist li.even { background-color: #F0F0F0; }

ol.codelist li.sourcelink {
    color: #000;
    font: 115% Georgia, "Times New Roman", Times, serif;
    list-style: none;
    margin-left: -32px;
    padding-top: .85em;
    text-align: center;
    }

ol.codelist li code { color: #222; }
</code></pre>
<div class="sourcelink">Download Source Code: <a href="http://elasticdog.com/code/2004/09/code-viewer.css">code-viewer.css</a></div><br />

<h3 id="usage">Usage</h3>

Code Viewer basically searches your entry for a custom <abbr title="Extensible Markup Language">XML</abbr> tag named <code><viewcode /></code>, that tells the server to look at an external file and parse it line-by-line into an ordered list.  It can be placed anywhere a block-level tag is valid, and like any empty element in <abbr title="Extensible Hypertext Markup Language">XHTML</abbr>, <strong>the tag must be properly closed</strong>.

To better illustrate its usage, the tag used in this entry (to show the <kbd>code-viewer.css</kbd> listing above) was:<br />
<code><viewcode src="2004/09/code-viewer.css" link="yes" /></code>

<!--more-->

<h3 id="parameters">Parameters</h3>

<pre><code>
<viewcode src="URL" link="display" />
</code></pre></br>

<ul>
	<li>The <code>src</code> attribute is <strong>required</strong>.
		<ul>
			<li>&#34;URL&#34; - <i>string</i> - The <abbr title="Uniform Resource Locator">URL</abbr> of the code to display.  Note that relative paths are in relation to the <var>$default_path</var> variable set during <a href="#installation">the installation step</a>.</li>
		</ul>
	</li>
	<li>The <code>link</code> attribute is <strong>optional</strong>.
		<ul>
			<li>&#34;display&#34; - <i>string</i> - Should the link to the code be displayed (<code>"yes"</code>), or not be displayed (<code>"no"</code>).  If the <code>link</code> attribute is left out of the tag completely, the value defaults to <code>"no"</code>.</li>
		</ul>
	</li>
</ul>

Here are some examples of <em>valid syntax</em> recognized by Code Viewer...note that all of these examples point to the same file (assuming the <var>$default_path</var> variable is set to &#34;<code>http://elasticdog.com/code/</code>&#34;):

<pre><code>
<viewcode src="http://elasticdog.com/code/example.txt" link="no" />
<viewcode src="http://elasticdog.com/code/example.txt" />
<viewcode src="/code/example.txt" />
<viewcode src="example.txt" />
</code></pre><br />

Each attribute value <strong>must</strong> be surrounded with double quotes (&#34;), and <em>not</em> single quotes (&#39;), or the tag will not be recognized.

<h3 id="version-history">Version History</h3>

<ul>
	<li><em>v1.1 (10 Oct 2004)</em> - Fixed blank line detection; no longer confused by whitespace characters.</li>
	<li><em>v1.01 (30 Sep 2004)</em> - Update to <kbd>code-viewer.css</kbd>; fixed inconsistent font sizing.</li>
	<li><em>v1.0 (26 Sep 2004)</em> - Initial release to the public.</li>
</ul>

<h3 id="credits">Credits</h3>

The idea to use ordered lists in <abbr title="Extensible Hypertext Markup Language">XHTML</abbr> to present code, originated from Simon Willison's <a href="http://simon.incutio.com/archive/2002/07/10/numberedCodeListing">CSS Numbered Code Listings</a> blog entry.  The same idea has been used by other designers, and in particular, a fellow <abbr title="WordPress">WP</abbr> plugin author named David House...

Looking at <a href="http://xmouse.ithium.net/archives/2004/07/19/implementing-a-code-snippet-system">David's code-snippet system</a>, I fell in love with the idea, but thought his implementation could be improved upon.  Code Viewer should be much more efficient in comparison and has the added functionality of optional link inclusion, styling differences for every other line, and better <abbr title="Uniform Resource Locator">URL</abbr> & file type support.  A big thanks goes out to both David and Simon for their contributions to my latest creation.
